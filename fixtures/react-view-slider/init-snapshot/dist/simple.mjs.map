{"version":3,"file":"simple.mjs","names":["React","Prefixer","ViewSlider","defaultRenderView","index","state","views","createSimpleViewSlider","renderView","SimpleViewSlider","Component","constructor","props","child","Children","only","children","activeView","parseInt","key","componentDidUpdate","prevProps","setState","bind","handleSlideTransitionEnd","keepViewsMounted","length","slice","onSlideTransitionEnd","render","spacing","rtl","keepPrecedingViewsMounted","createElement","_extends","numViews"],"sources":["src/simple.js"],"sourcesContent":["/* @flow */\n/* eslint-env browser */\n\nimport * as React from 'react'\nimport Prefixer from 'inline-style-prefixer'\nimport ViewSlider from './index'\nimport type { Props as ViewSliderProps, ViewProps } from './index'\n\nexport type Props = {\n  children?: any,\n  keepViewsMounted?: ?boolean,\n  keepPrecedingViewsMounted?: ?boolean,\n  animateHeight?: ?boolean,\n  transitionDuration?: ?number,\n  transitionTimingFunction?: ?string,\n  onSlideTransitionEnd?: ?() => mixed,\n  prefixer?: ?Prefixer,\n  fillParent?: ?boolean,\n  className?: ?string,\n  style?: ?Object,\n  viewportClassName?: ?string,\n  viewportStyle?: ?Object,\n  viewStyle?: ?Object,\n  innerViewWrapperStyle?: ?Object,\n  rootRef?: ?(node: ?React.ElementRef<'div'>) => mixed,\n  viewportRef?: ?(node: ?React.ElementRef<'div'>) => mixed,\n  rtl?: ?boolean,\n  spacing?: ?number,\n}\n\nexport type State = {\n  views: Array<React.Node>,\n  activeView: number,\n}\n\nfunction defaultRenderView({ index }: ViewProps): React.Element<'div'> {\n  return this.state.views[index]\n}\n\nexport function createSimpleViewSlider(\n  ViewSlider: React.ComponentType<ViewSliderProps>,\n  renderView: (props: ViewProps) => React.Node = defaultRenderView\n): Class<React.Component<Props, State>> {\n  return class SimpleViewSlider extends React.Component<Props, State> {\n    state: State\n\n    constructor(props: Props) {\n      super(props)\n      const child = React.Children.only(props.children)\n      const activeView = parseInt(child.key)\n      const views = []\n      views[activeView] = child\n      this.state = { views, activeView }\n    }\n\n    componentDidUpdate(prevProps: Props) {\n      if (prevProps.children !== this.props.children) {\n        const child = React.Children.only(this.props.children)\n        const activeView = parseInt(child.key)\n        const views = [...this.state.views]\n        views[activeView] = child\n        this.setState({ views, activeView })\n      }\n    }\n\n    renderView = renderView.bind(this)\n\n    handleSlideTransitionEnd = () => {\n      if (!this.props.keepViewsMounted) {\n        const { views, activeView } = this.state\n        if (activeView < views.length - 1) {\n          this.setState(\n            {\n              views: views.slice(0, activeView + 1),\n            },\n            () => {\n              const { onSlideTransitionEnd } = this.props\n              if (onSlideTransitionEnd) onSlideTransitionEnd()\n            }\n          )\n        }\n      }\n    }\n\n    render(): React.Node {\n      const {\n        children, // eslint-disable-line no-unused-vars\n        // Flow's React.ComponentType + defaultProps is foobar...\n        spacing,\n        rtl,\n        keepViewsMounted,\n        keepPrecedingViewsMounted,\n        ...props\n      } = this.props\n      const { activeView, views } = this.state\n      return (\n        <ViewSlider\n          {...props}\n          keepViewsMounted={keepViewsMounted || keepPrecedingViewsMounted}\n          spacing={(spacing: any)}\n          rtl={(rtl: any)}\n          renderView={this.renderView}\n          numViews={views.length}\n          activeView={activeView}\n          onSlideTransitionEnd={this.handleSlideTransitionEnd}\n        />\n      )\n    }\n  }\n}\n\nexport default createSimpleViewSlider(ViewSlider)\n"],"mappings":";AACA;AAEA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,UAAU;AA8BjB,SAASC,iBAAiBA,CAAC;EAAEC;AAAiB,CAAC,EAAwB;EACrE,OAAO,IAAI,CAACC,KAAK,CAACC,KAAK,CAACF,KAAK,CAAC;AAChC;AAEA,OAAO,SAASG,sBAAsBA,CACpCL,UAAgD,EAChDM,UAA4C,GAAGL,iBAAiB,EAC1B;EACtC,OAAO,MAAMM,gBAAgB,SAAST,KAAK,CAACU,SAAS,CAAe;IAGlEC,WAAWA,CAACC,KAAY,EAAE;MACxB,KAAK,CAACA,KAAK,CAAC;MACZ,MAAMC,KAAK,GAAGb,KAAK,CAACc,QAAQ,CAACC,IAAI,CAACH,KAAK,CAACI,QAAQ,CAAC;MACjD,MAAMC,UAAU,GAAGC,QAAQ,CAACL,KAAK,CAACM,GAAG,CAAC;MACtC,MAAMb,KAAK,GAAG,EAAE;MAChBA,KAAK,CAACW,UAAU,CAAC,GAAGJ,KAAK;MACzB,IAAI,CAACR,KAAK,GAAG;QAAEC,KAAK;QAAEW;MAAW,CAAC;IACpC;IAEAG,kBAAkBA,CAACC,SAAgB,EAAE;MACnC,IAAIA,SAAS,CAACL,QAAQ,KAAK,IAAI,CAACJ,KAAK,CAACI,QAAQ,EAAE;QAC9C,MAAMH,KAAK,GAAGb,KAAK,CAACc,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACH,KAAK,CAACI,QAAQ,CAAC;QACtD,MAAMC,UAAU,GAAGC,QAAQ,CAACL,KAAK,CAACM,GAAG,CAAC;QACtC,MAAMb,KAAK,GAAG,CAAC,GAAG,IAAI,CAACD,KAAK,CAACC,KAAK,CAAC;QACnCA,KAAK,CAACW,UAAU,CAAC,GAAGJ,KAAK;QACzB,IAAI,CAACS,QAAQ,CAAC;UAAEhB,KAAK;UAAEW;QAAW,CAAC,CAAC;MACtC;IACF;IAEAT,UAAU,GAAGA,UAAU,CAACe,IAAI,CAAC,IAAI,CAAC;IAElCC,wBAAwB,GAAGA,CAAA,KAAM;MAC/B,IAAI,CAAC,IAAI,CAACZ,KAAK,CAACa,gBAAgB,EAAE;QAChC,MAAM;UAAEnB,KAAK;UAAEW;QAAW,CAAC,GAAG,IAAI,CAACZ,KAAK;QACxC,IAAIY,UAAU,GAAGX,KAAK,CAACoB,MAAM,GAAG,CAAC,EAAE;UACjC,IAAI,CAACJ,QAAQ,CACX;YACEhB,KAAK,EAAEA,KAAK,CAACqB,KAAK,CAAC,CAAC,EAAEV,UAAU,GAAG,CAAC;UACtC,CAAC,EACD,MAAM;YACJ,MAAM;cAAEW;YAAqB,CAAC,GAAG,IAAI,CAAChB,KAAK;YAC3C,IAAIgB,oBAAoB,EAAEA,oBAAoB,CAAC,CAAC;UAClD,CACF,CAAC;QACH;MACF;IACF,CAAC;IAEDC,MAAMA,CAAA,EAAe;MACnB,MAAM;QACJb,QAAQ;QAAE;QACV;QACAc,OAAO;QACPC,GAAG;QACHN,gBAAgB;QAChBO,yBAAyB;QACzB,GAAGpB;MACL,CAAC,GAAG,IAAI,CAACA,KAAK;MACd,MAAM;QAAEK,UAAU;QAAEX;MAAM,CAAC,GAAG,IAAI,CAACD,KAAK;MACxC,oBACEL,KAAA,CAAAiC,aAAA,CAAC/B,UAAU,EAAAgC,QAAA,KACLtB,KAAK;QACTa,gBAAgB,EAAEA,gBAAgB,IAAIO,yBAA0B;QAChEF,OAAO,EAAGA,OAAc;QACxBC,GAAG,EAAGA,GAAU;QAChBvB,UAAU,EAAE,IAAI,CAACA,UAAW;QAC5B2B,QAAQ,EAAE7B,KAAK,CAACoB,MAAO;QACvBT,UAAU,EAAEA,UAAW;QACvBW,oBAAoB,EAAE,IAAI,CAACJ;MAAyB,EACrD,CAAC;IAEN;EACF,CAAC;AACH;AAEA,eAAejB,sBAAsB,CAACL,UAAU,CAAC"}
