{"version":3,"file":"simple.js","names":["React","_interopRequireWildcard","require","_inlineStylePrefixer","_interopRequireDefault","_index","_excluded","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Boolean","valueOf","e","defaultRenderView","_ref","index","state","views","createSimpleViewSlider","ViewSlider","renderView","length","undefined","_React$Component","_inherits2","SimpleViewSlider","_super","props","_this","_classCallCheck2","_defineProperty2","_assertThisInitialized2","bind","keepViewsMounted","_this$state","activeView","setState","slice","onSlideTransitionEnd","child","Children","only","children","parseInt","_createClass2","value","componentDidUpdate","prevProps","_toConsumableArray2","render","_this$props","spacing","rtl","keepPrecedingViewsMounted","_objectWithoutProperties2","_this$state2","createElement","_extends2","numViews","handleSlideTransitionEnd","Component","_default","exports"],"sources":["src/simple.js"],"sourcesContent":["/* @flow */\n/* eslint-env browser */\n\nimport * as React from 'react'\nimport Prefixer from 'inline-style-prefixer'\nimport ViewSlider from './index'\nimport type { Props as ViewSliderProps, ViewProps } from './index'\n\nexport type Props = {\n  children?: any,\n  keepViewsMounted?: ?boolean,\n  keepPrecedingViewsMounted?: ?boolean,\n  animateHeight?: ?boolean,\n  transitionDuration?: ?number,\n  transitionTimingFunction?: ?string,\n  onSlideTransitionEnd?: ?() => mixed,\n  prefixer?: ?Prefixer,\n  fillParent?: ?boolean,\n  className?: ?string,\n  style?: ?Object,\n  viewportClassName?: ?string,\n  viewportStyle?: ?Object,\n  viewStyle?: ?Object,\n  innerViewWrapperStyle?: ?Object,\n  rootRef?: ?(node: ?React.ElementRef<'div'>) => mixed,\n  viewportRef?: ?(node: ?React.ElementRef<'div'>) => mixed,\n  rtl?: ?boolean,\n  spacing?: ?number,\n}\n\nexport type State = {\n  views: Array<React.Node>,\n  activeView: number,\n}\n\nfunction defaultRenderView({ index }: ViewProps): React.Element<'div'> {\n  return this.state.views[index]\n}\n\nexport function createSimpleViewSlider(\n  ViewSlider: React.ComponentType<ViewSliderProps>,\n  renderView: (props: ViewProps) => React.Node = defaultRenderView\n): Class<React.Component<Props, State>> {\n  return class SimpleViewSlider extends React.Component<Props, State> {\n    state: State\n\n    constructor(props: Props) {\n      super(props)\n      const child = React.Children.only(props.children)\n      const activeView = parseInt(child.key)\n      const views = []\n      views[activeView] = child\n      this.state = { views, activeView }\n    }\n\n    componentDidUpdate(prevProps: Props) {\n      if (prevProps.children !== this.props.children) {\n        const child = React.Children.only(this.props.children)\n        const activeView = parseInt(child.key)\n        const views = [...this.state.views]\n        views[activeView] = child\n        this.setState({ views, activeView })\n      }\n    }\n\n    renderView = renderView.bind(this)\n\n    handleSlideTransitionEnd = () => {\n      if (!this.props.keepViewsMounted) {\n        const { views, activeView } = this.state\n        if (activeView < views.length - 1) {\n          this.setState(\n            {\n              views: views.slice(0, activeView + 1),\n            },\n            () => {\n              const { onSlideTransitionEnd } = this.props\n              if (onSlideTransitionEnd) onSlideTransitionEnd()\n            }\n          )\n        }\n      }\n    }\n\n    render(): React.Node {\n      const {\n        children, // eslint-disable-line no-unused-vars\n        // Flow's React.ComponentType + defaultProps is foobar...\n        spacing,\n        rtl,\n        keepViewsMounted,\n        keepPrecedingViewsMounted,\n        ...props\n      } = this.props\n      const { activeView, views } = this.state\n      return (\n        <ViewSlider\n          {...props}\n          keepViewsMounted={keepViewsMounted || keepPrecedingViewsMounted}\n          spacing={(spacing: any)}\n          rtl={(rtl: any)}\n          renderView={this.renderView}\n          numViews={views.length}\n          activeView={activeView}\n          onSlideTransitionEnd={this.handleSlideTransitionEnd}\n        />\n      )\n    }\n  }\n}\n\nexport default createSimpleViewSlider(ViewSlider)\n"],"mappings":"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"}
