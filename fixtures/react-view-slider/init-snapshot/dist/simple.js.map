{"version":3,"file":"simple.js","names":["React","_interopRequireWildcard","require","_inlineStylePrefixer","_interopRequireDefault","_index","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","defaultRenderView","index","state","views","createSimpleViewSlider","ViewSlider","renderView","SimpleViewSlider","Component","constructor","props","child","Children","only","children","activeView","parseInt","componentDidUpdate","prevProps","setState","bind","handleSlideTransitionEnd","keepViewsMounted","length","slice","onSlideTransitionEnd","render","spacing","rtl","keepPrecedingViewsMounted","createElement","_extends2","numViews","_default","exports"],"sources":["src/simple.js"],"sourcesContent":["/* @flow */\n/* eslint-env browser */\n\nimport * as React from 'react'\nimport Prefixer from 'inline-style-prefixer'\nimport ViewSlider from './index'\nimport type { Props as ViewSliderProps, ViewProps } from './index'\n\nexport type Props = {\n  children?: any,\n  keepViewsMounted?: ?boolean,\n  keepPrecedingViewsMounted?: ?boolean,\n  animateHeight?: ?boolean,\n  transitionDuration?: ?number,\n  transitionTimingFunction?: ?string,\n  onSlideTransitionEnd?: ?() => mixed,\n  prefixer?: ?Prefixer,\n  fillParent?: ?boolean,\n  className?: ?string,\n  style?: ?Object,\n  viewportClassName?: ?string,\n  viewportStyle?: ?Object,\n  viewStyle?: ?Object,\n  innerViewWrapperStyle?: ?Object,\n  rootRef?: ?(node: ?React.ElementRef<'div'>) => mixed,\n  viewportRef?: ?(node: ?React.ElementRef<'div'>) => mixed,\n  rtl?: ?boolean,\n  spacing?: ?number,\n}\n\nexport type State = {\n  views: Array<React.Node>,\n  activeView: number,\n}\n\nfunction defaultRenderView({ index }: ViewProps): React.Element<'div'> {\n  return this.state.views[index]\n}\n\nexport function createSimpleViewSlider(\n  ViewSlider: React.ComponentType<ViewSliderProps>,\n  renderView: (props: ViewProps) => React.Node = defaultRenderView\n): Class<React.Component<Props, State>> {\n  return class SimpleViewSlider extends React.Component<Props, State> {\n    state: State\n\n    constructor(props: Props) {\n      super(props)\n      const child = React.Children.only(props.children)\n      const activeView = parseInt(child.key)\n      const views = []\n      views[activeView] = child\n      this.state = { views, activeView }\n    }\n\n    componentDidUpdate(prevProps: Props) {\n      if (prevProps.children !== this.props.children) {\n        const child = React.Children.only(this.props.children)\n        const activeView = parseInt(child.key)\n        const views = [...this.state.views]\n        views[activeView] = child\n        this.setState({ views, activeView })\n      }\n    }\n\n    renderView = renderView.bind(this)\n\n    handleSlideTransitionEnd = () => {\n      if (!this.props.keepViewsMounted) {\n        const { views, activeView } = this.state\n        if (activeView < views.length - 1) {\n          this.setState(\n            {\n              views: views.slice(0, activeView + 1),\n            },\n            () => {\n              const { onSlideTransitionEnd } = this.props\n              if (onSlideTransitionEnd) onSlideTransitionEnd()\n            }\n          )\n        }\n      }\n    }\n\n    render(): React.Node {\n      const {\n        children, // eslint-disable-line no-unused-vars\n        // Flow's React.ComponentType + defaultProps is foobar...\n        spacing,\n        rtl,\n        keepViewsMounted,\n        keepPrecedingViewsMounted,\n        ...props\n      } = this.props\n      const { activeView, views } = this.state\n      return (\n        <ViewSlider\n          {...props}\n          keepViewsMounted={keepViewsMounted || keepPrecedingViewsMounted}\n          spacing={(spacing: any)}\n          rtl={(rtl: any)}\n          renderView={this.renderView}\n          numViews={views.length}\n          activeView={activeView}\n          onSlideTransitionEnd={this.handleSlideTransitionEnd}\n        />\n      )\n    }\n  }\n}\n\nexport default createSimpleViewSlider(ViewSlider)\n"],"mappings":"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"}
